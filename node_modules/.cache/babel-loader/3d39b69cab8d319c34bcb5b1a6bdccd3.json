{"ast":null,"code":"import _objectSpread from\"C:/xampp/htdocs/keta-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/xampp/htdocs/keta-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/xampp/htdocs/keta-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/xampp/htdocs/keta-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/xampp/htdocs/keta-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/xampp/htdocs/keta-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/xampp/htdocs/keta-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Client from'../contentful';import{jsx as _jsx}from\"react/jsx-runtime\";var PortfolioContext=/*#__PURE__*/React.createContext();var PortfolioProvider=/*#__PURE__*/function(_Component){_inherits(PortfolioProvider,_Component);var _super=_createSuper(PortfolioProvider);function PortfolioProvider(){var _this;_classCallCheck(this,PortfolioProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={items:[],currentItems:[],loading:true,currentPage:1,previousPage:1,nextPage:2,numberPerPage:10,totalOfItem:0,totalOfPage:0};_this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,items,currentItems;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Client.getEntries({content_type:\"portfolio\"});case 3:response=_context.sent;items=_this.formatData(response.items);currentItems=_this.getItemsByPage(_this.state.currentPage,items);_this.setState({items:items,loading:false,TotalOfItems:items.length,currentItems:currentItems,totalOfPage:Math.ceil(items.length/_this.state.numberPerPage)});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));_this.getItemsByPage=function(){var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var items=arguments.length>1?arguments[1]:undefined;var startIndex=0;var endIndex=_this.state.numberPerPage;if(page>1){startIndex=(page-1)*_this.state.numberPerPage;endIndex=_this.state.numberPerPage*page-1;}var tempItems=items.slice(startIndex,endIndex);return tempItems;};_this.handleLoadPage=function(){var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var currentItems=_this.getItemsByPage(page,_this.state.items);_this.setState({currentPage:page,currentItems:currentItems,previousPage:page>1?page-1:page,nextPage:page<_this.state.totalOfItem?page+1:_this.state.totalOfItem});};_this.formatData=function(items){var tempItems=items.map(function(item){var id=item.sys.id;var image=item.fields.image.fields.file.url;var title=item.fields.title;var post={id:id,title:title,image:image};return post;});return tempItems;};return _this;}_createClass(PortfolioProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(PortfolioContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleLoadPage:this.handleLoadPage,getItemsByPage:this.getItemsByPage}),children:this.props.children});}}]);return PortfolioProvider;}(Component);var PortfolioConsumer=PortfolioContext.Consumer;export function withPortfolioConsumer(Component){return function consumerWrapper(props){return/*#__PURE__*/_jsx(PortfolioConsumer,{children:function children(value){return/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},props),{},{context:value}));}});};}export{PortfolioProvider,PortfolioConsumer,PortfolioContext};","map":{"version":3,"sources":["C:/xampp/htdocs/keta-blog/src/context/portfolio.js"],"names":["React","Component","Client","PortfolioContext","createContext","PortfolioProvider","state","items","currentItems","loading","currentPage","previousPage","nextPage","numberPerPage","totalOfItem","totalOfPage","getData","getEntries","content_type","response","formatData","getItemsByPage","setState","TotalOfItems","length","Math","ceil","console","log","page","startIndex","endIndex","tempItems","slice","handleLoadPage","map","item","id","sys","image","fields","file","url","title","post","props","children","PortfolioConsumer","Consumer","withPortfolioConsumer","consumerWrapper","value"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport Client from '../contentful';\r\n\r\nconst PortfolioContext = React.createContext();\r\n\r\nclass PortfolioProvider extends Component {\r\n\tstate = {\r\n\t\titems: [],\r\n\t\tcurrentItems: [],\r\n\t\tloading: true,\r\n\t\tcurrentPage: 1,\r\n\t\tpreviousPage: 1,\r\n\t\tnextPage: 2,\r\n\t\tnumberPerPage: 10,\r\n\t\ttotalOfItem: 0,\r\n\t\ttotalOfPage: 0,\r\n\t}\r\n\r\n\tgetData = async () => {\r\n\t\ttry{\r\n\t\t\tlet response = await Client.getEntries({\r\n\t\t\t\tcontent_type: \"portfolio\",\r\n\t\t\t});\r\n\r\n\t\t\tlet items = this.formatData(response.items);\r\n\t\t\tlet currentItems = this.getItemsByPage(this.state.currentPage, items);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\titems: items,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tTotalOfItems: items.length,\r\n\t\t\t\tcurrentItems: currentItems,\r\n\t\t\t\ttotalOfPage: Math.ceil(items.length / this.state.numberPerPage)\r\n\t\t\t});\r\n\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n\r\n\tgetItemsByPage = (page = 1, items) => {\r\n\t\tlet startIndex = 0;\r\n\t\tlet endIndex = this.state.numberPerPage;\r\n\r\n\t\tif(page > 1) {\r\n\t\t\tstartIndex = (page - 1) * this.state.numberPerPage;\r\n\t\t\tendIndex = (this.state.numberPerPage * page) - 1;\r\n\t\t}\r\n\t\t\r\n\t\tlet tempItems = items.slice(startIndex, endIndex);\r\n\r\n\t\treturn tempItems;\r\n\t}\r\n\r\n\thandleLoadPage =  (page = 1) => {\r\n\t\tlet currentItems = this.getItemsByPage(page, this.state.items);\r\n\r\n\t\tthis.setState({\r\n\t\t\tcurrentPage: page,\r\n\t\t\tcurrentItems: currentItems,\r\n\t\t\tpreviousPage: (page > 1 ? page - 1 : page ),\r\n\t\t\tnextPage: (page < this.state.totalOfItem ? page + 1 : this.state.totalOfItem),\r\n\t\t});\r\n \t}\r\n\r\n\tcomponentDidMount () {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tformatData =  (items) => {\r\n\t\tlet tempItems = items.map(item => {\r\n\r\n\t\t\tlet id = item.sys.id\r\n\t\t\tlet image = item.fields.image.fields.file.url;\r\n            let title = item.fields.title;\r\n\r\n\t\t\tlet post = {id, title,image};\r\n\r\n\t\t\treturn post;\r\n\t\t});\r\n\r\n\t\treturn tempItems;\r\n\t}\r\n \r\n\trender() {\r\n\t\treturn(\r\n\t\t\t<PortfolioContext.Provider value={{ ...this.state, handleLoadPage: this.handleLoadPage, getItemsByPage: this.getItemsByPage }}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</PortfolioContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst PortfolioConsumer = PortfolioContext.Consumer;\r\n\r\nexport function withPortfolioConsumer(Component) {\r\n\treturn function consumerWrapper(props) {\r\n\t\treturn <PortfolioConsumer>\r\n\t\t\t{value => <Component {...props} context={value} /> }\r\n\t\t</PortfolioConsumer>\r\n\t}\r\n}\r\n\r\nexport {PortfolioProvider, PortfolioConsumer, PortfolioContext}"]},"metadata":{},"sourceType":"module"}